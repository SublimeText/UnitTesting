# if you are looking for a working example
# refer to https://github.com/randy3k/UnitTesting-example/blob/master/.github/workflows/test.yaml

name: test

on: [push, pull_request]

jobs:
  cancel-previous-runs:
    runs-on: ubuntu-latest
    steps:
      - uses: styfle/cancel-workflow-action@0.9.1
        with:
          access_token: ${{ github.token }}


  test-install-dependencies:
    strategy:
      fail-fast: false
      matrix:
        os: ["ubuntu-latest", "macOS-latest"]
    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/setup-node@v2
        with:
          node-version: '14'
      - uses: actions/checkout@v2
        with:
          repository: sublimelsp/lsp_utils
      - uses: SublimeText/UnitTesting/actions/setup@deps
        with:
          package-name: lsp_utils
          unittesting-version: deps
          extra-packages: |
            sublimelsp/LSP@main
            sublimelsp/LSP-pyright
      - uses: SublimeText/UnitTesting/actions/run-tests@deps
        with:
          package-name: lsp_utils
